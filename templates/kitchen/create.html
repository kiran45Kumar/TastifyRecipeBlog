{% extends 'kitchen/admin.html' %}
       {% block body-content %}

       <style>

       </style>
     
         <!-- partial -->
         <div class="main-panel">
          <div class="content-wrapper">
            <div class="page-header">
              <h3 class="page-title">Recipes</h3>
              <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                  <li class="breadcrumb-item"><a href="/recipes/{{kitchen.kitchen_id}}">Recipes</a></li>
                  <li class="breadcrumb-item active" aria-current="page"> Create Recipes</li>
                </ol>
              </nav>
            </div>


            <div class="row">
              <!-- <div class="col-md-6 grid-margin stretch-card">
                <div class="card">
                  <div class="card-body">
                    <h4 class="card-title">Default form</h4>
                    <p class="card-description">Basic form layout</p>
                    <form class="forms-sample">
                      <div class="form-group">
                        <label for="exampleInputUsername1">Username</label>
                        <input type="text" class="form-control" id="exampleInputUsername1" placeholder="Username" />
                      </div>
                      <div class="form-group">
                        <label for="exampleInputEmail1">Email address</label>
                        <input type="email" class="form-control" id="exampleInputEmail1" placeholder="Email" />
                      </div>
                      <div class="form-group">
                        <label for="exampleInputPassword1">Password</label>
                        <input type="password" class="form-control" id="exampleInputPassword1" placeholder="Password" />
                      </div>
                      <div class="form-group">
                        <label for="exampleInputConfirmPassword1">Confirm Password</label>
                        <input type="password" class="form-control" id="exampleInputConfirmPassword1" placeholder="Password" />
                      </div>
                      <div class="form-check form-check-flat form-check-primary">
                        <label class="form-check-label">
                          <input type="checkbox" class="form-check-input" /> Remember me </label>
                      </div>
                      <button type="submit" class="btn btn-primary mr-2"> Submit </button>
                      <button class="btn btn-light">Cancel</button>
                    </form>
                  </div>
                </div>
              </div> -->
              <!-- <div class="col-md-6 grid-margin stretch-card">
                <div class="card">
                  <div class="card-body">
                    <h4 class="card-title">Horizontal Form</h4>
                    <p class="card-description">Horizontal form layout</p>
                    <form class="forms-sample">
                      <div class="form-group row">
                        <label for="exampleInputUsername2" class="col-sm-3 col-form-label">Email</label>
                        <div class="col-sm-9">
                          <input type="text" class="form-control" id="exampleInputUsername2" placeholder="Username" />
                        </div>
                      </div>
                      <div class="form-group row">
                        <label for="exampleInputEmail2" class="col-sm-3 col-form-label">Email</label>
                        <div class="col-sm-9">
                          <input type="email" class="form-control" id="exampleInputEmail2" placeholder="Email" />
                        </div>
                      </div>
                      <div class="form-group row">
                        <label for="exampleInputMobile" class="col-sm-3 col-form-label">Mobile</label>
                        <div class="col-sm-9">
                          <input type="text" class="form-control" id="exampleInputMobile" placeholder="Mobile number" />
                        </div>
                      </div>
                      <div class="form-group row">
                        <label for="exampleInputPassword2" class="col-sm-3 col-form-label">Password</label>
                        <div class="col-sm-9">
                          <input type="password" class="form-control" id="exampleInputPassword2" placeholder="Password" />
                        </div>
                      </div>
                      <div class="form-group row">
                        <label for="exampleInputConfirmPassword2" class="col-sm-3 col-form-label">Re Password</label>
                        <div class="col-sm-9">
                          <input type="password" class="form-control" id="exampleInputConfirmPassword2" placeholder="Password" />
                        </div>
                      </div>
                      <div class="form-check form-check-flat form-check-primary">
                        <label class="form-check-label">
                          <input type="checkbox" class="form-check-input" /> Remember me </label>
                      </div>
                      <button type="submit" class="btn btn-primary mr-2"> Submit </button>
                      <button class="btn btn-light">Cancel</button>
                    </form>
                  </div>
                </div>
              </div> -->
              <!-- <div class="col-12 grid-margin stretch-card">
                <div class="card">
                  <div class="card-body">
                    <h4 class="card-title">Basic form elements</h4>
                    <p class="card-description">Basic form elements</p>
                    <form class="forms-sample">
                      <div class="form-group">
                        <label for="exampleInputName1">Name</label>
                        <input type="text" class="form-control" id="exampleInputName1" placeholder="Name" />
                      </div>
                      <div class="form-group">
                        <label for="exampleInputEmail3">Email address</label>
                        <input type="email" class="form-control" id="exampleInputEmail3" placeholder="Email" />
                      </div>
                      <div class="form-group">
                        <label for="exampleInputPassword4">Password</label>
                        <input type="password" class="form-control" id="exampleInputPassword4" placeholder="Password" />
                      </div>
                      <div class="form-group">
                        <label for="exampleSelectGender">Gender</label>
                        <select class="form-control" id="exampleSelectGender">
                          <option>Male</option>
                          <option>Female</option>
                        </select>
                      </div>
                      <div class="form-group">
                        <label>File upload</label>
                        <input type="file" name="img[]" class="file-upload-default" />
                        <div class="input-group col-xs-12">
                          <input type="text" class="form-control file-upload-info" disabled placeholder="Upload Image" />
                          <span class="input-group-append">
                            <button class="file-upload-browse btn btn-primary" type="button"> Upload </button>
                          </span>
                        </div>
                      </div>
                      <div class="form-group">
                        <label for="exampleInputCity1">City</label>
                        <input type="text" class="form-control" id="exampleInputCity1" placeholder="Location" />
                      </div>
                      <div class="form-group">
                        <label for="exampleTextarea1">Textarea</label>
                        <textarea
                          class="form-control"
                          id="exampleTextarea1"
                          rows="4"
                        ></textarea>
                      </div>
                      <button type="submit" class="btn btn-primary mr-2"> Submit </button>
                      <button class="btn btn-light">Cancel</button>
                    </form>
                  </div>
                </div>
              </div> -->
              <!-- <div class="col-md-6 grid-margin stretch-card">
                <div class="card">
                  <div class="card-body">
                    <h4 class="card-title">Input size</h4>
                    <p class="card-description"> Add classes like <code>.form-control-lg</code> and <code>.form-control-sm</code>. </p>
                    <div class="form-group">
                      <label>Large input</label>
                      <input type="text" class="form-control form-control-lg" placeholder="Username" aria-label="Username" />
                    </div>
                    <div class="form-group">
                      <label>Default input</label>
                      <input type="text" class="form-control" placeholder="Username" aria-label="Username" />
                    </div>
                    <div class="form-group">
                      <label>Small input</label>
                      <input type="text" class="form-control form-control-sm" placeholder="Username" aria-label="Username" />
                    </div>
                  </div>
                </div>
              </div> -->
              <!-- <div class="col-md-6 grid-margin stretch-card">
                <div class="card">
                  <div class="card-body">
                    <h4 class="card-title">Select size</h4>
                    <p class="card-description"> Add classes like <code>.form-control-lg</code> and <code>.form-control-sm</code>. </p>
                    <div class="form-group">
                      <label for="exampleFormControlSelect1">Large select</label>
                      <select class="form-control form-control-lg" id="exampleFormControlSelect1">
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <label for="exampleFormControlSelect2">Default select</label>
                      <select class="form-control" id="exampleFormControlSelect2">
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <label for="exampleFormControlSelect3">Small select</label>
                      <select class="form-control form-control-sm" id="exampleFormControlSelect3">
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                      </select>
                    </div>
                  </div>
                </div>
              </div> -->
              <!-- <div class="col-md-6 grid-margin stretch-card">
                <div class="card">
                  <div class="card-body">
                    <h4 class="card-title">Basic input groups</h4>
                    <p class="card-description">Basic bootstrap input groups</p>
                    <div class="form-group">
                      <div class="input-group">
                        <div class="input-group-prepend">
                          <span class="input-group-text">@</span>
                        </div>
                        <input type="text" class="form-control" placeholder="Username" aria-label="Username" aria-describedby="basic-addon1" />
                      </div>
                    </div>
                    <div class="form-group">
                      <div class="input-group">
                        <div class="input-group-prepend">
                          <span class="input-group-text bg-primary text-white">$</span>
                        </div>
                        <input type="text" class="form-control" aria-label="Amount (to the nearest dollar)" />
                        <div class="input-group-append">
                          <span class="input-group-text">.00</span>
                        </div>
                      </div>
                    </div>
                    <div class="form-group">
                      <div class="input-group">
                        <div class="input-group-prepend">
                          <span class="input-group-text">$</span>
                        </div>
                        <div class="input-group-prepend">
                          <span class="input-group-text">0.00</span>
                        </div>
                        <input type="text" class="form-control" aria-label="Amount (to the nearest dollar)" />
                      </div>
                    </div>
                    <div class="form-group">
                      <div class="input-group">
                        <input type="text" class="form-control" placeholder="Recipient's username" aria-label="Recipient's username" aria-describedby="basic-addon2" />
                        <div class="input-group-append">
                          <button class="btn btn-sm btn-primary" type="button"> Search </button>
                        </div>
                      </div>
                    </div>
                    <div class="form-group">
                      <div class="input-group">
                        <div class="input-group-prepend">
                          <button class="btn btn-sm btn-outline-primary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> Dropdown </button>
                          <div class="dropdown-menu">
                            <a class="dropdown-item" href="#">Action</a>
                            <a class="dropdown-item" href="#">Another action</a>
                            <a class="dropdown-item" href="#">Something else here</a>
                            <div role="separator" class="dropdown-divider"></div>
                            <a class="dropdown-item" href="#">Separated link</a>
                          </div>
                        </div>
                        <input type="text" class="form-control" aria-label="Text input with dropdown button" />
                      </div>
                    </div>
                    <div class="form-group">
                      <div class="input-group">
                        <input type="text" class="form-control" placeholder="Find in facebook" aria-label="Recipient's username" aria-describedby="basic-addon2" />
                        <div class="input-group-append">
                          <button class="btn btn-sm btn-facebook" type="button">
                            <i class="mdi mdi-facebook"></i>
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div> -->
              <!-- <div class="col-md-6 grid-margin stretch-card">
                <div class="card">
                  <div class="card-body">
                    <h4 class="card-title">Checkbox Controls</h4>
                    <p class="card-description"> Checkbox and radio controls (default appearance is in primary color) </p>
                    <form>
                      <div class="row">
                        <div class="col-md-6">
                          <div class="form-group">
                            <div class="form-check">
                              <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" /> Default </label>
                            </div>
                            <div class="form-check">
                              <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" checked /> Checked </label>
                            </div>
                            <div class="form-check">
                              <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" disabled /> Disabled </label>
                            </div>
                            <div class="form-check">
                              <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" disabled checked /> Disabled checked </label>
                            </div>
                          </div>
                        </div>
                        <div class="col-md-6">
                          <div class="form-group">
                            <div class="form-check">
                              <label class="form-check-label">
                                <input type="radio" class="form-check-input" name="optionsRadios" id="optionsRadios1" value="" /> Default </label>
                            </div>
                            <div class="form-check">
                              <label class="form-check-label">
                                <input type="radio" class="form-check-input" name="optionsRadios" id="optionsRadios2" value="option2" checked /> Selected </label>
                            </div>
                            <div class="form-check">
                              <label class="form-check-label">
                                <input type="radio" class="form-check-input" name="optionsRadios2" id="optionsRadios3" value="option3" disabled /> Disabled </label>
                            </div>
                            <div class="form-check">
                              <label class="form-check-label">
                                <input type="radio" class="form-check-input" name="optionsRadio2" id="optionsRadios4" value="option4" disabled checked /> Selected and disabled </label>
                            </div>
                          </div>
                        </div>
                      </div>
                    </form>
                  </div>
                  <div class="card-body">
                    <p class="card-description"> Add class <code>.form-check-{color}</code> for checkbox and radio controls in theme colors </p>
                    <form>
                      <div class="row">
                        <div class="col-md-6">
                          <div class="form-group">
                            <div class="form-check form-check-primary">
                              <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" checked /> Primary </label>
                            </div>
                            <div class="form-check form-check-success">
                              <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" checked /> Success </label>
                            </div>
                            <div class="form-check form-check-info">
                              <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" checked /> Info </label>
                            </div>
                            <div class="form-check form-check-danger">
                              <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" checked /> Danger </label>
                            </div>
                            <div class="form-check form-check-warning">
                              <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" checked /> Warning </label>
                            </div>
                          </div>
                        </div>
                        <div class="col-md-6">
                          <div class="form-group">
                            <div class="form-check form-check-primary">
                              <label class="form-check-label">
                                <input type="radio" class="form-check-input" name="ExampleRadio1" id="ExampleRadio1" checked /> Primary </label>
                            </div>
                            <div class="form-check form-check-success">
                              <label class="form-check-label">
                                <input type="radio" class="form-check-input" name="ExampleRadio2" id="ExampleRadio2" checked /> Success </label>
                            </div>
                            <div class="form-check form-check-info">
                              <label class="form-check-label">
                                <input type="radio" class="form-check-input" name="ExampleRadio3" id="ExampleRadio3" checked /> Info </label>
                            </div>
                            <div class="form-check form-check-danger">
                              <label class="form-check-label">
                                <input type="radio" class="form-check-input" name="ExampleRadio4" id="ExampleRadio4" checked /> Danger </label>
                            </div>
                            <div class="form-check form-check-warning">
                              <label class="form-check-label">
                                <input type="radio" class="form-check-input" name="ExampleRadio5" id="ExampleRadio5" checked /> Warning </label>
                            </div>
                          </div>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
              </div> -->
              <!-- <div class="col-12 grid-margin stretch-card">
                <div class="card">
                  <div class="card-body">
                    <h4 class="card-title">Inline forms</h4>
                    <p class="card-description"> Use the <code>.form-inline</code> class to display a series of labels, form controls, and buttons on a single horizontal row </p>
                    <form class="form-inline">
                      <label class="sr-only" for="inlineFormInputName2">Name</label>
                      <input type="text" class="form-control mb-2 mr-sm-2" id="inlineFormInputName2" placeholder="Jane Doe" />
                      <label class="sr-only" for="inlineFormInputGroupUsername2">Username</label>
                      <div class="input-group mb-2 mr-sm-2">
                        <div class="input-group-prepend">
                          <div class="input-group-text">@</div>
                        </div>
                        <input type="text" class="form-control" id="inlineFormInputGroupUsername2" placeholder="Username" />
                      </div>
                      <div class="form-check mx-sm-2">
                        <label class="form-check-label">
                          <input type="checkbox" class="form-check-input" checked /> Remember me </label>
                      </div>
                      <button type="submit" class="btn btn-primary mb-2"> Submit </button>
                    </form>
                  </div>
                </div>
              </div> -->
             
             
              <div class="col-12 grid-margin">
                <div class="card">
                  <div class="card-body">
                    <h4 class="card-title">Create Your Recipe Here</h4>
                    <div class="form-sample">
                      <p class="card-description"></p>
                      <div class="row">
                        <div class="col-md-6">
                          <div class="form-group row">
                            <label class="col-sm-3 col-form-label">Recipe Title</label>
                            <div class="col-sm-9">
                              <input type="text" class="form-control" id="recipe-title" placeholder="Recipe Title" />
                            </div>
                          </div>
                        </div>
                        <div class="col-md-6">
                          <div class="form-group row">
                            <label class="col-sm-3 col-form-label">Description</label>
                            <div class="col-sm-9">
                              <textarea class="form-control" id="desc"  placeholder="Description"></textarea>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-md-6">
                          <div class="form-group row">
                            <label class="col-sm-3 col-form-label">Kitchen</label>
                            <div class="col-sm-9">
                              <select class="form-control" id="category">
                              <option value="">Select category</option>
                                {% for kitchen in kitchens %}
                                <option value="{{kitchen.kitchen_id}}">{{kitchen.kitchen_name}}</option>
                                {% endfor %}
                              </select>
                            </div>
                          </div>
                        </div>
                        <div class="col-md-6">
                          <div class="form-group row">
                            <label class="col-sm-3 col-form-label">Ingredients</label>
                            <div class="col-sm-9">
                              <input type="text" class="form-control" id="ingredients" placeholder="Enter the Ingredients" />
                            </div>
                          </div>
                        </div>
                      </div>
                      <p class="card-description"></p>
                      <div class="row">
                        <div class="col-md-6">
                          <div class="form-group row">
                            <label class="col-sm-3 col-form-label">Instructions</label>
                            <div class="col-sm-9">
                              <input type="text" class="form-control"  id="instruction" placeholder="Instructions"/>
                            </div>
                          </div>
                        </div>
                        <div class="col-md-6">
                          <div class="form-group row">
                            <label class="col-sm-3 col-form-label">Preparation Time</label>
                            <div class="col-sm-9">
                              <input type="text" class="form-control"  id="preptime" placeholder="Enter the Preparation Time"/>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-md-6">
                          <div class="form-group row">
                            <label class="col-sm-3 col-form-label">Cooking Time</label>
                            <div class="col-sm-9">
                              <input type="text" class="form-control" id="cooktime" placeholder="Enter the Cooking Time" />
                            </div>
                          </div>
                        </div>
                        <div class="col-md-6">
                          <div class="form-group row">
                            <label class="col-sm-3 col-form-label">Serving Size</label>
                            <div class="col-sm-9">
                              <input type="text" class="form-control" id="servSize" placeholder="Serving Size" />
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-md-6">
                          <div class="form-group row">
                            <label class="col-sm-3 col-form-label">Nutrtion Info</label>
                            <div class="col-sm-9">
                              <input type="text" class="form-control" placeholder="Nutrition Info" id="nutrition" />
                              <input type="hidden" name="user_id" id="userId" value="{{current_user_id}}">
                            </div>
                          </div>
                        </div>
                        <div class="col-md-6">
                          <div class="form-group row">
                            <label class="col-sm-3 col-form-label">Recipe Image</label>
                            <div class="col-sm-9">
                              <input type="file" class="form-control" id="postimg" />
                            </div>
                          </div>
                        </div>
                        <div class="col-md-6">
                          <button type="submit" class="btn btn-primary m-10" onclick="createPost()"> Submit </button>
                      <!-- <button class="btn btn-light" onclick="toggleModalREfresh()">Cancel</button> -->
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- <div class="col-md-6 grid-margin stretch-card">
                <div class="card">
                  <div class="card-body">
                    <h4 class="card-title">Select 2</h4>
                    <div class="form-group">
                      <label>Single select box using select 2</label>
                      <select class="js-example-basic-single" style="width: 100%;">
                        <option value="AL">Alabama</option>
                        <option value="WY">Wyoming</option>
                        <option value="AM">America</option>
                        <option value="CA">Canada</option>
                        <option value="RU">Russia</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <label>Multiple select using select 2</label>
                      <select class="js-example-basic-multiple" multiple="multiple" style="width: 100%;">
                        <option value="AL">Alabama</option>
                        <option value="WY">Wyoming</option>
                        <option value="AM">America</option>
                        <option value="CA">Canada</option>
                        <option value="RU">Russia</option>
                      </select>
                    </div>
                  </div>
                </div>
              </div> -->
              <!-- <div class="col-md-6 grid-margin stretch-card">
                <div class="card">
                  <div class="card-body">
                    <h4 class="card-title">Typeahead</h4>
                    <p class="card-description">A simple suggestion engine</p>
                    <div class="form-group row">
                      <div class="col">
                        <label>Basic</label>
                        <div id="the-basics">
                          <input class="typeahead" type="text" placeholder="States of USA" />
                        </div>
                      </div>
                      <div class="col">
                        <label>Bloodhound</label>
                        <div id="bloodhound">
                          <input class="typeahead" type="text" placeholder="States of USA" />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div> -->
            </div>
          </div>
          <!-- content-wrapper ends -->
          <!-- partial:../../partials/_footer.html -->
          <footer class="footer">
            <div class="d-sm-flex justify-content-center justify-content-sm-between">
              <span class="text-muted d-block text-center text-sm-left d-sm-inline-block">Copyright Â© bootstrapdash.com 2020</span>
              <span class="float-none float-sm-right d-block mt-1 mt-sm-0 text-center"> Free <a href="https://www.bootstrapdash.com/" target="_blank">Bootstrap dashboard templates</a> from Bootstrapdash.com</span>
            </div>
          </footer>
          <!-- partial -->
        </div>

       
      
      <!-- <div id="my-toast-container" style="position: fixed; top: 1rem; right: 1rem; z-index: 9999;"></div> -->


        <!-- main-panel ends -->
         <script>
function toggleModalREfresh() {
  let title = $("#recipe-title").val();
        let desc = $("#desc").val();
        let ingredients = $("#ingredients").val();
        let instruction = $("#instruction").val();
        let preptime = $("#preptime").val();
        let cooktime = $("#cooktime").val();
        let servSize = $("#servSize").val();
        let nutrition = $("#nutrition").val();
        let userId = $("#userId").val();
        let category = $("#category").val();
        let postimg = $("#postimg")[0].files[0];
        let postTag = $(".postTag").val();
        if(!title){
          const errorMsg = 'Enter title';
          showCustomToast(errorMsg, 'error')
          return;
        }
        else if(!desc){
          const errorMsg = 'Enter Description';
          showCustomToast(errorMsg, 'error')
          return;
        }
        else if(!category){
          const errorMsg = ' Select Kitchen';
          showCustomToast(errorMsg, 'error')
          return;
        }
        else if(!ingredients){
          const errorMsg = ' Enter Ingredients';
          showCustomToast(errorMsg, 'error')
          return;
        }
        else if(!instruction){
          const errorMsg = 'Enter Instruction';
          showCustomToast(errorMsg, 'error')
          return;
        }
        else if(!preptime){
          const errorMsg = ' Enter Preparation Time';
          showCustomToast(errorMsg, 'error')
          return;
        }
        else if(!cooktime){
          const errorMsg = 'Enter Cooking Time';
          showCustomToast(errorMsg, 'error')
          return;
        }
        else if(!servSize){
          const errorMsg = ' Enter Serving Size';
          showCustomToast(errorMsg, 'error')
          return;
        }
        else if(!cooktime){
          const errorMsg = ' Enter Cooking Time';
          showCustomToast(errorMsg, 'error')
          return;
        }
       
        else if(!nutrition){
          const errorMsg = ' Enter Nutrition';
          showCustomToast(errorMsg, 'error')
          return;
        }
        else if(postimg == null){
          const errorMsg = ' Please Upload Image';
          showCustomToast(errorMsg, 'error')
          return;
        }
        let tagsArray = []
        $(".postTag").each(function () {
            tagsArray.push($(this).val());
        });

        const formdata = new FormData();
        formdata.append('title', title)
        formdata.append('desc', desc)
        formdata.append('ingredients', ingredients)
        formdata.append('instruction', instruction)
        formdata.append('preptime', preptime)
        formdata.append('cooktime', cooktime)
        formdata.append('servSize', servSize)
        formdata.append('nutrition', nutrition)
        formdata.append('userId', userId)
        formdata.append('kitchen', category)
        formdata.append('postimg', postimg);
        formdata.append('postTag', JSON.stringify(tagsArray));
        $("#comment-loader").show();
        const startTime = new Date().getTime();
        // $("#success").text("Posting...").css("color","#28a475");
        $.ajax({
            type: "POST",
            url: "/change_draft/",
            data: formdata,
            processData: false,
            contentType: false,
            success: function (data) {
                const endTime = new Date().getTime();
                const duration = endTime - startTime;
                const minimumLoaderTime = 1500;
                const delay = duration < minimumLoaderTime ? minimumLoaderTime - duration : 0;
               setTimeout(() => {
                $("#comment-loader").hide();
                if (data) {
                    const msg =
                        'Post Drafted ';
                    showCustomToast(msg);
                    setTimeout(() => {
                        window.location.replace('/view_recipes/{{kitchen.kitchen_id}}')
                    }, 5000);
                }
                else{
                    const errorMsg = 'Something Went Wrong';
                    showCustomToast(errorMsg);
                }
               }, delay);
            },
            error: function (error) {
                const errorMsg = '<i class="fas fa-times-circle"></i> Something Went Wrong';
                    showToast(errorMsg, 'success');
            }
        })
    }
function createPost() {
        let title = $("#recipe-title").val();
        let desc = $("#desc").val();
        let ingredients = $("#ingredients").val();
        let instruction = $("#instruction").val();
        let preptime = $("#preptime").val();
        let cooktime = $("#cooktime").val();
        let servSize = $("#servSize").val();
        let nutrition = $("#nutrition").val();
        let userId = $("#userId").val();
        let category = $("#category").val();
        let postimg = $("#postimg")[0].files[0];
        let postTag = $(".postTag").val();
        if(!title){
          const errorMsg = ' Enter title';
          showCustomToast(errorMsg, 'error')
          return;
        }
        else if(title.length > 50){
          const errorMsg = 'Title length should be less than 50'
          showCustomToast(errorMsg)
          return;
        }
        else if(!desc){
          const errorMsg = ' Enter Description';
          showCustomToast(errorMsg, 'error')
          return;
        }
        else if(desc.length > 500){
          const errorMsg = 'Description Should be 500';
          showCustomToast(errorMsg);
          return;
        }
        else if(!category){
          const errorMsg = ' Select Kitchen';
          showCustomToast(errorMsg, 'error')
          return;
        }
        else if(!ingredients){
          const errorMsg = ' Enter Ingredients';
          showCustomToast(errorMsg, 'error')
          return;
        }
        else if(!instruction){
          const errorMsg = 'Enter Instruction';
          showCustomToast(errorMsg, 'error')
          return;
        }
        else if(!preptime){
          const errorMsg = ' Enter Preparation Time';
          showCustomToast(errorMsg, 'error')
          return;
        }
        else if(!cooktime){
          const errorMsg = 'Enter Cooking Time';
          showCustomToast(errorMsg, 'error')
          return;
        }
        else if(!servSize){
          const errorMsg = ' Enter Serving Size';
          showCustomToast(errorMsg, 'error')
          return;
        }
        else if(!cooktime){
          const errorMsg = ' Enter Cooking Time';
          showCustomToast(errorMsg, 'error')
          return;
        }
       
        else if(!nutrition){
          const errorMsg = ' Enter Nutrition';
          showCustomToast(errorMsg, 'error')
          return;
        }
        else if(postimg == null){
          const errorMsg = ' Please Upload Image';
          showCustomToast(errorMsg, 'error')
          return;
        }
        let tagsArray = []
        $(".postTag").each(function () {
            tagsArray.push($(this).val());
        });

        const formdata = new FormData();
        formdata.append('title', title)
        formdata.append('desc', desc)
        formdata.append('ingredients', ingredients)
        formdata.append('instruction', instruction)
        formdata.append('preptime', preptime)
        formdata.append('cooktime', cooktime)
        formdata.append('servSize', servSize)
        formdata.append('nutrition', nutrition)
        formdata.append('userId', userId)
        formdata.append('kitchen', category)
        formdata.append('postimg', postimg);
        formdata.append('postTag', JSON.stringify(tagsArray));
        $("#comment-loader").show();
        const startTime = new Date().getTime();
        $("#success").text("Posting...").css("color","#28a475");
        $.ajax({
            type: "POST",
            url: "{% url 'create_post' %}",
            data: formdata,
            processData: false,
            contentType: false,
            success: function (data) {
                const endTime = new Date().getTime();
                const duration = endTime - startTime;
                const minimumLoaderTime = 1500;
                const delay = duration < minimumLoaderTime ? minimumLoaderTime - duration : 0;
               setTimeout(() => {
                $("#comment-loader").hide();
                if (data) {
                  showCustomToast("Posted Successfully")
                    setTimeout(() => {
                      window.location.replace('/view_recipes/{{kitchen.kitchen_id}}')
                    }, 5000);
                }
                else{
                  $("#toastsuccess").show()
                  $("#success").text("Failed to Post").css("color","#28a475");
                  const errorMsg = '<i class="fas fa-times-circle"></i> Something Went Wrong';
                  showToast(errorMsg, 'success');
                }
               }, delay);
            },
            error: function (error) {
              $("#toastsuccess").show()
              $("#success").text(" Something Went Wrong").css("color","#28a475");
                const errorMsg = '<i class="fas fa-times-circle"></i> Something Went Wrong';
                    showToast(errorMsg, 'success');
                    // $("#toast-simple").show()
                    //  $("#success").text("Failed to do").css("color","#28a475");
            }
        })
    }


         </script>
{% endblock body-content %}
    